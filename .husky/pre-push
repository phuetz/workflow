#!/bin/sh
# Husky pre-push hook
# Lance les tests complets avant chaque push

echo ""
echo "ğŸš€ Pre-push: Validation complÃ¨te avant push..."
echo ""

# 1. TypeScript type checking
echo "ğŸ“ TypeScript type checking..."
npm run typecheck || exit 1

# 2. ESLint
echo ""
echo "ğŸ” ESLint code quality..."
npm run lint || {
    echo "âš ï¸  Warnings ESLint dÃ©tectÃ©s (non-bloquant)"
}

# 3. Smoke tests complets
echo ""
echo "ğŸ”¥ Smoke tests..."
npm run test:smoke || exit 1

# 4. Build test
echo ""
echo "ğŸ—ï¸  Test de build..."
npm run build:backend || exit 1

echo ""
echo "âœ… Pre-push validation rÃ©ussie! Vous pouvez push."
echo ""
